<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- ===== ê¸°ë³¸ ë¬¸ì„œ ì„¤ì • ===== -->
  <!-- ë¬¸ì„œ ë¬¸ì ì¸ì½”ë”© ì„¤ì • (UTF-8ë¡œ í•œê¸€ ì§€ì›) -->
  <meta charset="UTF-8">
  <!-- ë°˜ì‘í˜• ì›¹ ë””ìì¸ì„ ìœ„í•œ ë·°í¬íŠ¸ ì„¤ì • -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- ë¦¬í¼ëŸ¬ ì •ì±… ì„¤ì • - ì™¸ë¶€ ì‚¬ì´íŠ¸ë¡œ ì´ë™í•  ë•Œ URL ì •ë³´ ì „ì†¡ ë°©ì‹ -->
  <meta name="referrer" content="no-referrer-when-downgrade">
  <!-- ë³´ì•ˆ ì •ì±… ì„¤ì • - HTTP ìš”ì²­ì„ HTTPSë¡œ ìë™ ì—…ê·¸ë ˆì´ë“œ -->
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <!-- ìºì‹œ ì œì–´ ì„¤ì • - ë¸Œë¼ìš°ì € ìºì‹œ ì‚¬ìš© ì•ˆ í•¨ (ê°œë°œìš©) -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <!-- ê¸°ë³¸ URL ê²½ë¡œ ì„¤ì • -->
  <base href="./">
  <!-- ë¸Œë¼ìš°ì € íƒ­ì— í‘œì‹œë  í˜ì´ì§€ ì œëª© -->
  <title>ZAVIS</title>
  <!-- ë²„ì „ ì •ë³´ ì£¼ì„ (ë°°í¬ ë²„ì „ ì¶”ì ìš©) -->
  <!-- Updated for docs folder v2.1 -->
  
  <!-- ===== PWA (Progressive Web App) ì„¤ì • ===== -->
  <!-- PWA ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ ì—°ê²° (ì•±ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •) -->
  <link rel="manifest" href="manifest.json?v=2">
  
  <!-- PWA ë©”íƒ€ íƒœê·¸ë“¤ -->
  <!-- ì•± í…Œë§ˆ ìƒ‰ìƒ ì„¤ì • (ìƒíƒœë°” ìƒ‰ìƒ ë“±ì— ì‚¬ìš©) -->
  <meta name="theme-color" content="#f5ecd7">
  <!-- iOS Safariì—ì„œ ì›¹ì•± ëª¨ë“œ í™œì„±í™” -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <!-- iOS Safari ìƒíƒœë°” ìŠ¤íƒ€ì¼ ì„¤ì • -->
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <!-- iOS í™ˆí™”ë©´ì— ì¶”ê°€ë  ë•Œ í‘œì‹œë˜ëŠ” ì•± ì´ë¦„ -->
  <meta name="apple-mobile-web-app-title" content="ZAVIS">
  <!-- iOS í™ˆí™”ë©´ ì•„ì´ì½˜ ì„¤ì • -->
  <link rel="apple-touch-icon" href="mp1.png?v=2">
  
  <!-- ===== ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ ë¡œë“œ ===== -->
  <!-- ë„¥ìŠ¨ê³ ë”• ì›¹í°íŠ¸ CDN ë¡œë“œ - ì¼ê´€ëœ í•œê¸€ í°íŠ¸ ì ìš© -->
  <link href="https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2107@1.1/NEXON_Gothic.css" rel="stylesheet" type="text/css" />
  
  <!-- ìˆ˜íŒŒë² ì´ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë° ì¸ì¦ ê¸°ëŠ¥ -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    * {
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      overflow-x: hidden;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: 'NEXON Gothic', sans-serif;
      background: #f5ecd7; /* ë² ì´ì§€ */
      color: #222;
      min-height: 100vh;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
    }
    .container {
      width: 100%;
      max-width: 400px;
      margin: 0 auto;
      padding: 20px 20px 0 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 80vh;
    }
    .title {
      font-size: 3.5rem;
      font-weight: bold;
      margin-bottom: 24px;
      letter-spacing: 3px;
      text-align: center;
      word-break: keep-all;
    }
    .compass {
      width: 180px;
      max-width: 70vw;
      margin-bottom: 28px;
      display: block;
    }
    .desc {
      font-size: 1.1rem;
      font-weight: bold;
      text-align: center;
      margin-bottom: 32px;
      line-height: 1.7;
      letter-spacing: -1px;
      width: 100%;
      word-break: keep-all;
    }
    .desc span {
      display: block;
      margin-bottom: 4px;
    }
    .ask-btn {
      width: 50%;
      max-width: 280px;
      min-width: 200px;
      padding: 16px 12px;
      font-size: 1.1rem;
      font-family: inherit;
      font-weight: bold;
      background: #fffbe9;
      border: 2px solid #e0cfa9;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      transition: background 0.2s, border 0.2s;
      text-align: center;
      word-break: keep-all;
    }
    .ask-btn:hover {
      background: #f7efd2;
      border-color: #d6b98c;
    }
    
    .auth-section {
      margin-top: 32px;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }
    
    .auth-buttons {
      display: flex;
      gap: 12px;
      width: 100%;
      max-width: 280px;
      justify-content: center;
    }
    
    .auth-btn {
      flex: 1;
      padding: 14px 12px;
      font-size: 1rem;
      font-family: inherit;
      font-weight: bold;
      background: #fffbe9;
      border: 2px solid #e0cfa9;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      transition: background 0.2s, border 0.2s;
      text-align: center;
      text-decoration: none;
      color: #222;
      display: inline-block;
    }
    
    .auth-btn:hover {
      background: #f7efd2;
      border-color: #d6b98c;
    }
    
    .user-info {
      text-align: center;
      padding: 16px;
      background: rgba(255,255,255,0.3);
      border-radius: 12px;
      margin-top: 16px;
    }
    
    .user-name {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 8px;
      color: #333;
    }
    
    .user-stats {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 12px;
    }
    
    .logout-btn {
      padding: 8px 16px;
      font-size: 0.9rem;
      font-family: inherit;
      font-weight: bold;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
      color: #666;
    }
    
    .logout-btn:hover {
      background: #f5f5f5;
    }
    @media (max-width: 500px) {
      body {
        padding: 0;
        min-height: 100vh;
        height: 100vh;
        justify-content: center;
        overflow-x: hidden;
      }
      .container {
        padding: 16px 16px 0 16px;
        min-height: 80vh;
        justify-content: center;
        max-width: 95vw;
      }
      .title { 
        font-size: 2.5rem; 
        letter-spacing: 1px;
        margin-bottom: 20px;
      }
      .compass { 
        width: 120px; 
        max-width: 60vw; 
      }
      .desc { 
        font-size: 1rem; 
        letter-spacing: 0px;
      }
      .ask-btn { 
        font-size: 1rem; 
        padding: 12px 8px;
        width: 70%;
        min-width: 180px;
        max-width: 250px;
      }
      
      .auth-buttons {
        flex-direction: column;
        gap: 12px;
        max-width: 250px;
      }
      
      .auth-btn {
        width: 100%;
        padding: 12px;
        font-size: 0.9rem;
      }
    }
    @media (max-width: 350px) {
      .title {
        font-size: 2rem;
        letter-spacing: 0px;
      }
      .ask-btn {
        width: 80%;
        min-width: 160px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">ZAVIS</div>
    <img src="mp1.png" alt="ë‚˜ì¹¨ë°˜" class="compass" />
    <div class="desc">
      <span>ì‚¬ì¥ë‹˜ì˜ ìˆ˜í¼ì•±</span>
      <span>í†µì°°ì ì¸ ì¡°ì–¸ì</span>
      <span>ì˜ì‚¬ê²°ì • ë‚˜ì¹¨ë°˜</span>
    </div>
    <!-- ì§ˆë¬¸ì£¼ì„¸ìš” ë²„íŠ¼ - ë¡œê·¸ì¸ í™•ì¸ ê¸°ëŠ¥ í¬í•¨ -->
    <button 
        id="askBtn" 
        class="ask-btn" 
        onclick="handleAskButtonClick()"
        style="color: black;">ì§ˆë¬¸ì£¼ì„¸ìš”, 'Click!'</button>
    
    <!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… ì„¹ì…˜ -->
    <div class="auth-section">
      <!-- ë¡œë”© ìƒíƒœ í‘œì‹œ -->
      <div id="authLoading" style="display: block; text-align: center; padding: 20px;">
        <div style="font-size: 0.9rem; color: #666;">ë¡œë”© ì¤‘...</div>
      </div>
      
      <!-- ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ë³´ì—¬ì§ˆ ë²„íŠ¼ë“¤ -->
      <div id="authButtons" class="auth-buttons" style="display: none;">
        <a href="login.html" class="auth-btn">ë¡œê·¸ì¸</a>
        <a href="signup.html" class="auth-btn">íšŒì›ê°€ì…</a>
      </div>
      
      <!-- ë¡œê·¸ì¸ëœ ìƒíƒœì—ì„œ ë³´ì—¬ì§ˆ ì‚¬ìš©ì ì •ë³´ -->
      <div id="userInfo" class="user-info" style="display: none;">
        <div class="user-name" id="userName">ì‚¬ìš©ìë‹˜</div>
        <div class="user-stats" id="userStats">ë°©ë¬¸íšŸìˆ˜: 0íšŒ</div>
        <button class="logout-btn" id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</button>
      </div>
    </div>
    
    </div>

  <!-- ===== ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ë¡œë“œ ===== -->
  <!-- ìˆ˜íŒŒë² ì´ìŠ¤ ì„¤ì • ë° ì¸ì¦ ìŠ¤í¬ë¦½íŠ¸ -->
  <!-- ìˆ˜íŒŒë² ì´ìŠ¤ ì„¤ì • íŒŒì¼ ë¡œë“œ -->
  <script src="config.js"></script>
  <!-- ì¸ì¦ ê´€ë ¨ í•¨ìˆ˜ íŒŒì¼ ë¡œë“œ -->
  <script src="auth.js"></script>
  
  <!-- ===== ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ìŠ¤í¬ë¦½íŠ¸ ===== -->
  <script>
    // ============================================================================
    // PWA ì„œë¹„ìŠ¤ ì›Œì»¤ ê´€ë¦¬ í•¨ìˆ˜ë“¤
    // ============================================================================
    
    // ìºì‹œ í´ë¦¬ì–´ í•¨ìˆ˜ (í•„ìš”ì‹œì—ë§Œ ì‚¬ìš©)
    // ë¸Œë¼ìš°ì €ì— ì €ì¥ëœ ëª¨ë“  ìºì‹œë¥¼ ì‚­ì œí•˜ì—¬ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸
    async function clearAllCaches() {
      // ë¸Œë¼ìš°ì €ê°€ ìºì‹œ APIë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸
      if ('caches' in window) {
        try {
          // ëª¨ë“  ìºì‹œ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
          const cacheNames = await caches.keys();
          // ê° ìºì‹œë¥¼ ì‚­ì œ (ë³‘ë ¬ ì²˜ë¦¬)
          await Promise.all(
            cacheNames.map(cacheName => {
              console.log('Deleting cache:', cacheName);
              return caches.delete(cacheName);  // ìºì‹œ ì‚­ì œ
            })
          );
          console.log('All caches cleared successfully');
        } catch (error) {
          console.error('Cache clearing failed:', error);
        }
      }
    }

    // Service Worker ì•ˆì •ì  ë“±ë¡ í•¨ìˆ˜
    // ê¹œë¹¡ê±°ë¦¼ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì¬ë“±ë¡ ë¡œì§ì„ ìµœì†Œí™”
    async function registerServiceWorker() {
      // ë¸Œë¼ìš°ì €ê°€ ì„œë¹„ìŠ¤ ì›Œì»¤ë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸
      if ('serviceWorker' in navigator) {
        try {
          // ê¸°ì¡´ ë“±ë¡ í™•ì¸
          const existingRegistration = await navigator.serviceWorker.getRegistration();
          
          if (existingRegistration) {
            console.log('Service Worker already registered');
            return; // ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆìœ¼ë©´ ì¶”ê°€ ì‘ì—… ì•ˆ í•¨
          }
          
          // ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ (ê¹œë¹¡ê±°ë¦¼ ë°©ì§€ë¥¼ ìœ„í•´ ê°„ë‹¨í•˜ê²Œ)
          const registration = await navigator.serviceWorker.register('./sw.js', {
            scope: './'
          });
          
          console.log('Service Worker registered successfully');
          
          // ì—…ë°ì´íŠ¸ê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ì²˜ë¦¬
          registration.addEventListener('updatefound', () => {
            console.log('Service Worker update found');
            // ìƒˆ ë²„ì „ì´ ì„¤ì¹˜ë˜ë©´ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ (ìë™ ìƒˆë¡œê³ ì¹¨ í•˜ì§€ ì•ŠìŒ)
            if (registration.installing) {
              registration.installing.addEventListener('statechange', (e) => {
                if (e.target.state === 'activated') {
                  console.log('New Service Worker activated');
                  // ì‚¬ìš©ìì—ê²Œ ì„ íƒê¶Œ ì œê³µ (ê°•ì œ ìƒˆë¡œê³ ì¹¨ ì•ˆ í•¨)
                  // alert('ìƒˆ ë²„ì „ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
                }
              });
            }
          });
          
        } catch (error) {
          // ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ì‹¤íŒ¨ ì‹œ ì˜¤ë¥˜ ì¶œë ¥
          console.log('Service Worker registration failed:', error);
        }
      }
    }

    // ============================================================================
    // í˜ì´ì§€ ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    // ============================================================================
    
    // ì´ˆê¸°í™” ì¤‘ë³µ ë°©ì§€ í”Œë˜ê·¸
    let isInitialized = false;
    
    // ì´ˆê¸°í™” í•¨ìˆ˜ (ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€)
    function initializeApp() {
      if (isInitialized) return;
      isInitialized = true;
      
      console.log('ì•± ì´ˆê¸°í™” ì‹œì‘');
      
      // ë²„ì „ ì²´í¬ìš© ë¡œì»¬ìŠ¤í† ë¦¬ì§€
      const currentVersion = '2.1';
      const storedVersion = localStorage.getItem('zavis-version');
      
      if (storedVersion !== currentVersion) {
        localStorage.setItem('zavis-version', currentVersion);
      }
      
      // ì„œë¹„ìŠ¤ ì›Œì»¤ ì•ˆì •ì  ë“±ë¡
      registerServiceWorker();
      
      // ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ì•ˆì •ì ì¸ ì¸ì¦ ìƒíƒœ í™•ì¸
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      const delay = isMobile ? 500 : 300;  // ëª¨ë°”ì¼: 1ì´ˆâ†’0.5ì´ˆ, ë°ìŠ¤í¬í†±: 0.5ì´ˆâ†’0.3ì´ˆë¡œ ë‹¨ì¶•
      
      setTimeout(() => {
        stableAuthCheck();
        
        // ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ 1.5ì´ˆ í›„ì—ë„ ë¡œë”© ìƒíƒœë©´ ê°•ì œë¡œ ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ
        if (isMobile) {
          setTimeout(() => {
            const authLoading = document.getElementById('authLoading');
            if (authLoading && authLoading.style.display !== 'none') {
              console.log('ëª¨ë°”ì¼ í™˜ê²½: íƒ€ì„ì•„ì›ƒìœ¼ë¡œ ì¸í•œ ê°•ì œ ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ');
              showAuthButtons();
            }
          }, 1500);  // 5ì´ˆ â†’ 1.5ì´ˆë¡œ ë‹¨ì¶•
        }
      }, delay);
    }
    
    // í˜ì´ì§€ ë¡œë“œì‹œ ì‹¤í–‰ (ë‘ ê°€ì§€ ì´ë²¤íŠ¸ ëª¨ë‘ ì‚¬ìš©)
    // DOM ë¡œë“œ ì™„ë£Œ ì‹œ (ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ë” ë¹ ë¥¸ ì´ˆê¸°í™”)
    document.addEventListener('DOMContentLoaded', initializeApp);
    
    // ëª¨ë“  ë¦¬ì†ŒìŠ¤ ë¡œë“œ ì™„ë£Œ ì‹œ (ë°±ì—…ìš©)
    window.addEventListener('load', () => {
      // ì´ë¯¸ ì´ˆê¸°í™”ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´ ê±´ë„ˆë›°ê¸°
      initializeApp();
      
      // ì¶”ê°€ ì•ˆì „ì¥ì¹˜: ëª¨ë°”ì¼ì—ì„œ 1ì´ˆ í›„ì—ë„ ë¡œë”© ìƒíƒœë©´ ê°•ì œë¡œ ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ
      setTimeout(() => {
        const authLoading = document.getElementById('authLoading');
        if (authLoading && authLoading.style.display !== 'none') {
          console.log('window.load ì´ë²¤íŠ¸: ì¶”ê°€ ì•ˆì „ì¥ì¹˜ë¡œ ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ');
          showAuthButtons();
        }
      }, 1000);  // 2ì´ˆ â†’ 1ì´ˆë¡œ ë‹¨ì¶•
    });
    
    // ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ í˜ì´ì§€ í¬ì»¤ìŠ¤ ì‹œ ì¶”ê°€ ì²´í¬
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden) {
        // í˜ì´ì§€ê°€ ë‹¤ì‹œ ë³´ì´ê²Œ ë˜ì—ˆì„ ë•Œ ë¡œë”© ìƒíƒœ í™•ì¸
        setTimeout(() => {
          const authLoading = document.getElementById('authLoading');
          if (authLoading && authLoading.style.display !== 'none') {
            console.log('í˜ì´ì§€ í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸: ë¡œë”© ìƒíƒœ ì œê±° ë° ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ');
            showAuthButtons();
          }
        }, 500);  // 1ì´ˆ â†’ 0.5ì´ˆë¡œ ë‹¨ì¶•
      }
    });
    
    // ============================================================================
    // ì•ˆì •ì ì¸ ì¸ì¦ í™•ì¸ ì‹œìŠ¤í…œ (ë¡œê·¸ì¸ ë¬¸ì œ í•´ê²°)
    // ============================================================================
    
    // ì¤‘ë³µ ì¸ì¦ í™•ì¸ ë°©ì§€ìš© í”Œë˜ê·¸
    let authChecked = false;
    
    // ì•ˆì •ì ì¸ ì¸ì¦ í™•ì¸ í•¨ìˆ˜
    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì™€ ìˆ˜íŒŒë² ì´ìŠ¤ ì„¸ì…˜ì„ ìˆœì°¨ì ìœ¼ë¡œ í™•ì¸í•˜ì—¬ ë¡œê·¸ì¸ ìƒíƒœ ê²°ì •
    async function stableAuthCheck() {
      // ì´ë¯¸ ì¸ì¦ í™•ì¸ì´ ì™„ë£Œëœ ê²½ìš° ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
      if (authChecked) {
        return;
      }
      
      // ì¸ì¦ í™•ì¸ í”Œë˜ê·¸ ì„¤ì •
      authChecked = true;
      
      try {
        // ì¸ì¦ ìƒíƒœ í™•ì¸ ì‹œì‘
        
        // 0. URLì—ì„œ ì¸ì¦ í† í° í™•ì¸ (ì´ë©”ì¼ ì¸ì¦ ì§í›„)
        const urlParams = new URLSearchParams(window.location.search);
        const hashParams = new URLSearchParams(window.location.hash.substring(1));
        
        // ì¸ì¦ ê´€ë ¨ íŒŒë¼ë¯¸í„°ê°€ ìˆëŠ”ì§€ í™•ì¸
        const hasAuthParams = urlParams.has('access_token') || 
                             hashParams.has('access_token') || 
                             urlParams.has('error') || 
                             hashParams.has('error');
        
        if (hasAuthParams) {
          // URL íŒŒë¼ë¯¸í„° ì •ë¦¬ (ë³´ì•ˆ ë° ê¹”ë”í•œ URL ìœ ì§€)
          window.history.replaceState({}, document.title, window.location.pathname);
          
          // Supabaseê°€ ìë™ìœ¼ë¡œ ì„¸ì…˜ì„ ì²˜ë¦¬í•  ì‹œê°„ì„ ì¤Œ
          await new Promise(resolve => setTimeout(resolve, 500));  // 1ì´ˆ â†’ 0.5ì´ˆë¡œ ë‹¨ì¶•
        }
        
        // 1. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚¬ìš©ì ì •ë³´ í™•ì¸
        // ë¹ ë¥¸ ë¡œë”©ì„ ìœ„í•´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¨¼ì € í™•ì¸
        const savedUserInfo = localStorage.getItem('zavis-user-info');
        
        if (savedUserInfo) {
          try {
            // ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ JSONìœ¼ë¡œ íŒŒì‹±
            const userInfo = JSON.parse(savedUserInfo);
            showUserInfo(userInfo);  // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
            return;                  // ë¡œì»¬ ì •ë³´ê°€ ìˆìœ¼ë©´ ì¦‰ì‹œ ë°˜í™˜
          } catch (e) {
            // JSON íŒŒì‹± ì˜¤ë¥˜ ë°œìƒ ì‹œ ì†ìƒëœ ë°ì´í„° ì œê±°
            localStorage.removeItem('zavis-user-info');
          }
        }
        
        // 2. ìˆ˜íŒŒë² ì´ìŠ¤ í´ë¼ì´ì–¸íŠ¸ ëŒ€ê¸° (ëª¨ë°”ì¼ í™˜ê²½ ìµœì í™”)
        // config.jsì—ì„œ ì´ˆê¸°í™”ë˜ëŠ” ìˆ˜íŒŒë² ì´ìŠ¤ í´ë¼ì´ì–¸íŠ¸ê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ëŒ€ê¸°
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const maxRetries = isMobile ? 15 : 8;  // ëª¨ë°”ì¼: 3ì´ˆ, ë°ìŠ¤í¬í†±: 1.6ì´ˆ (ë¡œê·¸ì¸ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ì¦ê°€)
        const retryDelay = isMobile ? 200 : 100;  // ëª¨ë°”ì¼: 200ms, ë°ìŠ¤í¬í†±: 100ms
        
        console.log(`ëª¨ë°”ì¼ í™˜ê²½: ${isMobile}, ìµœëŒ€ ì¬ì‹œë„: ${maxRetries}íšŒ`);
        
        let retryCount = 0;
        while (!supabaseClient && retryCount < maxRetries) {
          console.log(`Supabase í´ë¼ì´ì–¸íŠ¸ ëŒ€ê¸° ì¤‘... (${retryCount + 1}/${maxRetries})`);
          await new Promise(resolve => setTimeout(resolve, retryDelay));
          retryCount++;
        }
        
        // ìˆ˜íŒŒë² ì´ìŠ¤ í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨ ì‹œ ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ
        if (!supabaseClient) {
          console.log('ìˆ˜íŒŒë² ì´ìŠ¤ í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨ - ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ');
          showAuthButtons();
          return;
        }
        
        // 3. ìˆ˜íŒŒë² ì´ìŠ¤ì—ì„œ í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ í™•ì¸
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì •ë³´ê°€ ì—†ê±°ë‚˜ ìˆ˜íŒŒë² ì´ìŠ¤ ì„¸ì…˜ í™•ì¸ì´ í•„ìš”í•œ ê²½ìš°
        
        // getSession í•¨ìˆ˜ë¡œ í˜„ì¬ ì„¸ì…˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const { data: sessionData, error: sessionError } = await supabaseClient.auth.getSession();
        
        // ì„¸ì…˜ ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¡œê·¸ ì¶œë ¥
        if (sessionError) {
          console.error('ì„¸ì…˜ í™•ì¸ ì˜¤ë¥˜:', sessionError);
          showAuthButtons();  // ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ
          return;            // í•¨ìˆ˜ ì¢…ë£Œ
        }
        
        // ì„¸ì…˜ì´ ìˆê³  ì‚¬ìš©ì ì •ë³´ê°€ ìˆëŠ” ê²½ìš°
        if (sessionData.session && sessionData.session.user) {
          
          // í”„ë¡œí•„ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
          const { data: profileData, error: profileError } = await supabaseClient
            .from('profiles')                               // profiles í…Œì´ë¸”ì—ì„œ
            .select('*')                                   // ëª¨ë“  ì»¬ëŸ¼ ì„ íƒ
            .eq('user_id', sessionData.session.user.id)    // í˜„ì¬ ì‚¬ìš©ìì˜ í”„ë¡œí•„
            .single();                                     // ë‹¨ì¼ ë ˆì½”ë“œ ë°˜í™˜
          
          if (profileData) {
            // í”„ë¡œí•„ ì •ë³´ê°€ ìˆëŠ” ê²½ìš°
            const userInfo = {
              name: profileData.name,
              email: profileData.email,
              visit_count: profileData.visit_count || 1
            };
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ (ë‹¤ìŒ ë°©ë¬¸ ì‹œ ë¹ ë¥¸ ë¡œë”©)
            localStorage.setItem('zavis-user-info', JSON.stringify(userInfo));
            
            // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
            showUserInfo(userInfo);
            
            // ì´ë©”ì¼ ì¸ì¦ ì§í›„ì¸ ê²½ìš° í™˜ì˜ ë©”ì‹œì§€ í‘œì‹œ
            if (hasAuthParams) {
              alert(`ğŸ‰ ì´ë©”ì¼ ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\n\ní™˜ì˜í•©ë‹ˆë‹¤, ${userInfo.name}ë‹˜!\nZAVISì™€ í•¨ê»˜ ì„±ê³µì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.`);
            }
          } else if (!profileError || profileError.code === 'PGRST116') {
            // í”„ë¡œí•„ì´ ì—†ëŠ” ê²½ìš° ìƒì„± ì‹œë„
            
            // ì‚¬ìš©ì ë©”íƒ€ë°ì´í„°ì—ì„œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            const metadata = currentUser.user_metadata || {};
            
            // ìƒˆ í”„ë¡œí•„ ìƒì„±
            const { data: newProfile, error: createError } = await supabaseClient
              .from('profiles')
              .insert([{
                user_id: currentUser.id,
                name: metadata.name || currentUser.email.split('@')[0] || 'ì‚¬ìš©ì',
                email: currentUser.email,
                phone: metadata.phone || '',
                visit_count: 1,
                created_at: new Date().toISOString()
              }])
              .select()
              .single();
            
            if (newProfile) {
              const userInfo = {
                name: newProfile.name,
                email: newProfile.email,
                visit_count: 1
              };
              
              // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
              localStorage.setItem('zavis-user-info', JSON.stringify(userInfo));
              
              // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
              showUserInfo(userInfo);
              
              // í™˜ì˜ ë©”ì‹œì§€
              if (hasAuthParams) {
                alert(`ğŸ‰ ì´ë©”ì¼ ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\n\ní™˜ì˜í•©ë‹ˆë‹¤, ${userInfo.name}ë‹˜!\nZAVISì™€ í•¨ê»˜ ì„±ê³µì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.`);
              }
            } else {
              console.error('í”„ë¡œí•„ ìƒì„± ì‹¤íŒ¨:', createError);
              // í”„ë¡œí•„ ìƒì„± ì‹¤íŒ¨í•´ë„ ê¸°ë³¸ ì •ë³´ë¡œ í‘œì‹œ
              const userInfo = {
                name: currentUser.email.split('@')[0],
                email: currentUser.email,
                visit_count: 1
              };
              showUserInfo(userInfo);
            }
          } else {
            // ë‹¤ë¥¸ í”„ë¡œí•„ ì˜¤ë¥˜
            console.error('í”„ë¡œí•„ ì¡°íšŒ ì˜¤ë¥˜:', profileError);
            showAuthButtons();  // ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ
          }
        }
        
      } catch (error) {
        // ì¸ì¦ í™•ì¸ ê³¼ì •ì—ì„œ ë°œìƒí•œ ì˜¤ë¥˜ë¥¼ ì½˜ì†”ì— ì¶œë ¥
        console.error('ì¸ì¦ í™•ì¸ ì˜¤ë¥˜:', error);
        
        // ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ í™•ì‹¤íˆ ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ
        setTimeout(() => {
          showAuthButtons();  // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ
        }, 100);
      } finally {
        // ìµœì¢…ì ìœ¼ë¡œ ë¡œë”© ìƒíƒœê°€ ë‚¨ì•„ìˆë‹¤ë©´ ì œê±° (ëª¨ë°”ì¼ì—ì„œ ë” ì˜¤ë˜ ëŒ€ê¸°)
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const finalTimeout = isMobile ? 2000 : 1200;  // ëª¨ë°”ì¼: 2ì´ˆ, ë°ìŠ¤í¬í†±: 1.2ì´ˆ
        
        setTimeout(() => {
          const authLoading = document.getElementById('authLoading');
          if (authLoading && authLoading.style.display !== 'none') {
            console.log('ìµœì¢… ì•ˆì „ì¥ì¹˜: ë¡œë”© ìƒíƒœ ì œê±° ë° ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ');
            showAuthButtons();
          }
        }, finalTimeout);
      }
    }
    
    // ============================================================================
    // UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
    // ============================================================================
    
    // ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ í•¨ìˆ˜
    // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ì„ í‘œì‹œ
    function showAuthButtons() {
      // ê° UI ìš”ì†Œë¥¼ IDë¡œ ì„ íƒ
      const authLoading = document.getElementById('authLoading');   // ë¡œë”© í‘œì‹œ ìš”ì†Œ
      const authButtons = document.getElementById('authButtons');   // ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ ê·¸ë£¹
      const userInfo = document.getElementById('userInfo');         // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ ìš”ì†Œ
      
      // ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ë” í™•ì‹¤í•˜ê²Œ UI ì—…ë°ì´íŠ¸
      requestAnimationFrame(() => {
        // ë¡œë”© í™”ë©´ ìˆ¨ê¸°ê¸°
        if (authLoading) {
          authLoading.style.display = 'none';
          authLoading.style.visibility = 'hidden';
        }
        
        // ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ í‘œì‹œ
        if (authButtons) {
          authButtons.style.display = 'flex';
          authButtons.style.visibility = 'visible';
        }
        
        // ì‚¬ìš©ì ì •ë³´ ì˜ì—­ ìˆ¨ê¸°ê¸°
        if (userInfo) {
          userInfo.style.display = 'none';
          userInfo.style.visibility = 'hidden';
        }
        
        console.log('ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ ì™„ë£Œ');
      });
    }
    
    // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ í•¨ìˆ˜
    // ë¡œê·¸ì¸ëœ ìƒíƒœì—ì„œ ì‚¬ìš©ì ì´ë¦„ê³¼ ë°©ë¬¸íšŸìˆ˜ë¥¼ í‘œì‹œ
    function showUserInfo(profile) {
      // ê° UI ìš”ì†Œë¥¼ IDë¡œ ì„ íƒ
      const authLoading = document.getElementById('authLoading');   // ë¡œë”© í‘œì‹œ ìš”ì†Œ
      const authButtons = document.getElementById('authButtons');   // ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ ê·¸ë£¹
      const userInfo = document.getElementById('userInfo');         // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ ìš”ì†Œ
      const userName = document.getElementById('userName');         // ì‚¬ìš©ì ì´ë¦„ í‘œì‹œ ìš”ì†Œ
      const userStats = document.getElementById('userStats');       // ë°©ë¬¸íšŸìˆ˜ í‘œì‹œ ìš”ì†Œ
      
      // ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ë” í™•ì‹¤í•˜ê²Œ UI ì—…ë°ì´íŠ¸
      requestAnimationFrame(() => {
        // ë¡œë”© í™”ë©´ ìˆ¨ê¸°ê¸°
        if (authLoading) {
          authLoading.style.display = 'none';
          authLoading.style.visibility = 'hidden';
        }
        
        // ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ ìˆ¨ê¸°ê¸°
        if (authButtons) {
          authButtons.style.display = 'none';
          authButtons.style.visibility = 'hidden';
        }
        
        // ì‚¬ìš©ì ì •ë³´ ì˜ì—­ í‘œì‹œ
        if (userInfo) {
          userInfo.style.display = 'block';
          userInfo.style.visibility = 'visible';
        }
        
        // ì‚¬ìš©ì ì´ë¦„ í‘œì‹œ (ì´ë¦„ì´ ì—†ìœ¼ë©´ ì´ë©”ì¼ í‘œì‹œ)
        if (userName) userName.textContent = profile.name || profile.email;
        // ë°©ë¬¸íšŸìˆ˜ í‘œì‹œ (ì—†ìœ¼ë©´ 0íšŒë¡œ í‘œì‹œ)
        if (userStats) userStats.textContent = `ë°©ë¬¸íšŸìˆ˜: ${profile.visit_count || 0}íšŒ`;
        
        console.log('ì‚¬ìš©ì ì •ë³´ í‘œì‹œ ì™„ë£Œ');
      });
    }
    
    // ============================================================================
    // ì§ˆë¬¸ì£¼ì„¸ìš” ë²„íŠ¼ ë¡œê·¸ì¸ í™•ì¸ í•¨ìˆ˜
    // ============================================================================
    
    // ì§ˆë¬¸ì£¼ì„¸ìš” ë²„íŠ¼ í´ë¦­ ì‹œ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ í›„ ì²˜ë¦¬
    async function handleAskButtonClick() {
      try {
        // 1. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚¬ìš©ì ì •ë³´ í™•ì¸ (ë¹ ë¥¸ í™•ì¸)
        const savedUserInfo = localStorage.getItem('zavis-user-info');
        
                 if (savedUserInfo) {
           // ë¡œì»¬ì— ì‚¬ìš©ì ì •ë³´ê°€ ìˆìœ¼ë©´ ë¡œê·¸ì¸ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ê³  ì„œë¹„ìŠ¤ë¡œ ì´ë™
           window.open('https://chat.openai.com/g/g-684f6e6b9ed48191bb537979053a36cc-naeireumeun-zavis-sajangnimyi-supeoaeb', '_blank', 'noopener,noreferrer');
           return;
         }
         
         // 2. ìˆ˜íŒŒë² ì´ìŠ¤ ì„¸ì…˜ í™•ì¸ (ë³´ì¡° í™•ì¸)
         if (supabaseClient) {
           const { data: sessionData, error: sessionError } = await supabaseClient.auth.getSession();
           
           if (!sessionError && sessionData.session && sessionData.session.user) {
             // ìˆ˜íŒŒë² ì´ìŠ¤ ì„¸ì…˜ì´ ìˆìœ¼ë©´ ë¡œê·¸ì¸ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ê³  ì„œë¹„ìŠ¤ë¡œ ì´ë™
             window.open('https://chat.openai.com/g/g-684f6e6b9ed48191bb537979053a36cc-naeireumeun-zavis-sajangnimyi-supeoaeb', '_blank', 'noopener,noreferrer');
             return;
           }
         }
        
        // 3. ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ê²½ìš° ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ (ë¸Œë¼ìš°ì €ë³„ ë¡œê·¸ì¸ ì•ˆë‚´ í¬í•¨)
        alert('ğŸ” ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤!\n\nì•„ë˜ ë¡œê·¸ì¸ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë¨¼ì € ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.\n\nğŸ“± ì°¸ê³ : ì¹´ì¹´ì˜¤í†¡, í¬ë¡¬, ì‚¬íŒŒë¦¬ ë“± ê° ë¸Œë¼ìš°ì €ë³„ë¡œ ë³„ë„ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.\n\në¡œê·¸ì¸ í›„ ZAVISì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
        
        // ë¡œê·¸ì¸ ë²„íŠ¼ìœ¼ë¡œ ì‹œì„  ìœ ë„ (ì„ íƒì‚¬í•­)
        const authButtons = document.getElementById('authButtons');
        if (authButtons && authButtons.style.display !== 'none') {
          // ë¡œê·¸ì¸ ë²„íŠ¼ì´ ë³´ì´ëŠ” ê²½ìš° ì ê¹ ê°•ì¡° íš¨ê³¼
          authButtons.style.transform = 'scale(1.05)';
          authButtons.style.transition = 'transform 0.3s ease';
          setTimeout(() => {
            authButtons.style.transform = 'scale(1)';
          }, 300);
        }
        
      } catch (error) {
        // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê¸°ë³¸ ë™ì‘ (ë¡œê·¸ì¸ ì•ˆë‚´)
        console.error('ë¡œê·¸ì¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);
        alert('ğŸ” ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤!\n\në¨¼ì € ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
      }
    }
    
    // ============================================================================
    // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    // ============================================================================
    
    // DOM ë¡œë“œ ì™„ë£Œ í›„ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    document.addEventListener('DOMContentLoaded', function() {
      // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ìš”ì†Œ ì„ íƒ
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        logoutBtn.addEventListener('click', async function() {
          // ë¡œê·¸ì•„ì›ƒ í™•ì¸ ëŒ€í™”ìƒì í‘œì‹œ
          if (confirm('ì •ë§ ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            try {
              // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì‚­ì œ
              localStorage.removeItem('zavis-user-info');
              
              // auth.jsì˜ signOut í•¨ìˆ˜ í˜¸ì¶œí•˜ì—¬ ë¡œê·¸ì•„ì›ƒ ì‹¤í–‰
              const result = await signOut();
              
              // UI ì—…ë°ì´íŠ¸ (í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ëŒ€ì‹  ì§ì ‘ ì—…ë°ì´íŠ¸)
              showAuthButtons();                    // ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ
              alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');          // ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ ì•Œë¦¼
              
            } catch (error) {
              // ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ ì²˜ë¦¬
              console.error('ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
              // ì˜¤ë¥˜ ë°œìƒ ì‹œì—ë„ UI ì—…ë°ì´íŠ¸ (ì¼ê´€ì„± ìœ ì§€)
              localStorage.removeItem('zavis-user-info');
              showAuthButtons();
            }
          }
        });
      }
    });
    
    // ============================================================================
    // ì¶”ê°€ ë¸Œë¼ìš°ì € ìµœì í™” ì„¤ì •
    // ============================================================================
    
    // í•„ìš”ì‹œì—ë§Œ ìºì‹œ ì œì–´ ë©”íƒ€ íƒœê·¸ ì¶”ê°€ (ê¹œë¹¡ê±°ë¦¼ ë°©ì§€)
    // ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•˜ê³  ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì£¼ì„ ì²˜ë¦¬
    if (localStorage.getItem('zavis-dev-mode') === 'true') {
      const meta = document.createElement('meta');                             // ìƒˆ ë©”íƒ€ íƒœê·¸ ìƒì„±
      meta.httpEquiv = 'Cache-Control';                                       // HTTP í—¤ë” ì„¤ì •
      meta.content = 'no-cache, no-store, must-revalidate, max-age=0';       // ìºì‹œ ì‚¬ìš© ê¸ˆì§€
      document.head.appendChild(meta);                                        // ë¬¸ì„œ í—¤ë“œì— ì¶”ê°€
    }
  </script>
</body>
</html> 